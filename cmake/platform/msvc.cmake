# Microsoft Visual C++

# Disable C++ RTTI.
SET(MCRECOVER_CXX_NO_RTTI_CXXFLAG "-GR-")

# Disable asynchronous exceptions.
# (MSVC doesn't allow disabling C++ exceptions entirely.)
SET(MCRECOVER_CXX_NO_EXCEPTIONS_CXXFLAG "-EHsc")

# Disable useless warnings:
# - MSVC "logo" messages
# - C4355: 'this' used in base member initializer list (used for Qt Dpointer pattern)
# - MSVCRT "deprecated" functions
SET(MCRECOVER_CFLAGS_COMMON "-nologo -wd4355 -D_CRT_SECURE_NO_WARNINGS -D_CRT_SECURE_NO_DEPRECATE -D_CRT_NONSTDC_NO_DEPRECATE")
SET(MCRECOVER_CXXFLAGS_COMMON "${MCRECOVER_CFLAGS_COMMON}")
SET(MCRECOVER_LDFLAGS_COMMON "-nologo")

# Disable the RC and MASM "logo".
SET(CMAKE_RC_FLAGS "-nologo")
SET(CMAKE_ASM_MASM_FLAGS "-nologo")

# Check for link-time optimization.
IF(ENABLE_LTO)
	SET(MCRECOVER_CFLAGS_LTO "-GL")
	SET(MCRECOVER_LDFLAGS_LTO "-LTCG")
ENDIF(ENABLE_LTO)

# Debug/release flags.
# NOTE: REMOVE ITERATOR DEBUGGING LATER
SET(MCRECOVER_CFLAGS_COMPILER_DEBUG "-Od -Z7 -MDd -D_HAS_ITERATOR_DEBUGGING=0")
SET(MCRECOVER_CXXFLAGS_COMPILER_DEBUG "-Od -Z7 -MDd -D_HAS_ITERATOR_DEBUGGING=0")
SET(MCRECOVER_CFLAGS_COMPILER_RELEASE "-Ox -Z7 -MD")
SET(MCRECOVER_CXXFLAGS_COMPILER_RELEASE "-Ox -Z7 -MD")
SET(MCRECOVER_LDFLAGS_COMPILER_DEBUG "-DEBUG")
SET(MCRECOVER_LDFLAGS_COMPILER_RELEASE "-DEBUG")
